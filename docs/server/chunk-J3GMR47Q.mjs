import './polyfills.server.mjs';
import{b as p}from"./chunk-FV4Z2F4W.mjs";import{t as d}from"./chunk-XZMPWWLY.mjs";import{L as c,R as u}from"./chunk-OEQEIWQ2.mjs";import{h as s}from"./chunk-VVCT4QZE.mjs";var b=(()=>{let i=class i{constructor(){this.apiUrl=`${p.url}/api/requests`,this.http=u(d)}getRequests(t){return s(this,null,function*(){try{let r=yield this.http.get(this.apiUrl+"/"+t).toPromise();if(r){let{message:e,requests:o}=r;if(o)return o;console.log("Error al obtener solicitudes:",e)}}catch(r){console.log("Error al realizar la solicitud:",r)}return[]})}getRequestsToday(t){return s(this,null,function*(){try{let r=yield this.http.get(this.apiUrl+"/toDate/"+t).toPromise();if(r){let{message:e,requests:o}=r;if(o)return o;console.log("Error al obtener solicitudes:",e)}}catch(r){console.log("Error al realizar la solicitud:",r)}return[]})}addRequest(t){return s(this,null,function*(){try{let r=yield this.http.post(this.apiUrl,{request:t}).toPromise();if(r){let{request:e}=r;if(e)return e._id;console.log("Error al crear solicitud:",r.message)}}catch(r){console.log("Error al realizar la solicitud:",r)}})}deleteRequest(t,r){return s(this,null,function*(){try{let e=yield this.http.delete(this.apiUrl+"/"+r).toPromise();if(e){let{message:o,ok:a}=e;if(a){let n=t.findIndex(h=>h._id===r);if(n!==-1)return t.splice(n,1)[0]}console.log("Error al eliminar el \xE1rea:",o)}}catch(e){console.log("Error al realizar la solicitud:",e)}})}updateRequest(t){return s(this,null,function*(){try{let r=yield this.http.put(this.apiUrl+"/"+t._id,{request:t}).toPromise();if(r){let{message:e,ok:o}=r;if(o)return!0;console.log("Error al modificar solicitud:",e)}}catch(r){console.log("Error al realizar la solicitud:",r)}return!1})}addMessage(t,r){return s(this,null,function*(){try{let e=yield this.http.put(this.apiUrl+"/message/"+t._id,{message:r}).toPromise();if(e){let{messageSaved:o,message:a}=e;if(o)return o;console.log("Error al mandar mensaje:",a)}}catch(e){console.log("Error al realizar la solicitud:",e)}})}checkAvailability(t){return s(this,null,function*(){try{let r=yield this.http.get(this.apiUrl+"/checkAvailability/"+t._id).toPromise();if(r){let{message:e,requests:o,ok:a}=r;if(a)return console.log("Disponible"),{ok:a};if(o)return console.log("Sobrepuestas"),{requests:o};console.log("Error al revisar la disponibilidad:",e)}}catch(r){console.log("Error al realizar la solicitud:",r)}return console.log("Sin informaci\xF3n"),{}})}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"});let l=i;return l})();export{b as a};
