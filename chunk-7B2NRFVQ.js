import{M as h,S as u,c as i,pb as d,ub as c}from"./chunk-EGZLEYQ3.js";var g=(()=>{let o=class o{constructor(){this.apiUrl=`${c.url}/api/requests`,this.http=u(d)}getRequests(s){return i(this,null,function*(){try{let r=yield this.http.get(this.apiUrl+"/"+s).toPromise();if(r){let{message:t,requests:e}=r;if(e)return e;this.showError("Error al obtener solicitudes(getRequests):",t)}}catch(r){this.showError("Error al realizar la solicitud(getRequests):",r)}return[]})}getRequestsToday(s){return i(this,null,function*(){try{let r=yield this.http.get(this.apiUrl+"/toDate/"+s).toPromise();if(r){let{message:t,requests:e}=r;if(e)return e;this.showError("Error al obtener solicitudes:",t)}}catch(r){this.showError("Error al realizar la solicitud:",r)}return[]})}addRequest(s){return i(this,null,function*(){try{let r=yield this.http.post(this.apiUrl,{request:s}).toPromise();if(r){let{request:t}=r;if(t)return s._id=t._id,t._id;this.showError("Error al crear solicitud:",r.message)}}catch(r){this.showError("Error al realizar la solicitud:",r)}})}addRequestAdmin(s,r){return i(this,null,function*(){try{let t=yield this.http.post(this.apiUrl+"/admin",{request:s,username2:r}).toPromise();if(t){let{request:e}=t;if(e)return s._id=e,e._id;this.showError("Error al crear solicitud:",t.message)}}catch(t){this.showError("Error al realizar la solicitud:",t)}})}deleteRequest(s,r){return i(this,null,function*(){try{let t=yield this.http.delete(this.apiUrl+"/"+r).toPromise();if(t){let{message:e,ok:a}=t;if(a){let l=s.findIndex(p=>p._id===r);if(l!==-1)return s.splice(l,1)[0]}this.showError("Error al eliminar el \xE1rea:",e)}}catch(t){this.showError("Error al realizar la solicitud:",t)}})}updateRequest(s){return i(this,null,function*(){try{let r=yield this.http.put(this.apiUrl+"/"+s._id,{request:s}).toPromise();if(r){let{message:t,ok:e}=r;if(e)return!0;this.showError("Error al modificar solicitud:",t)}}catch(r){this.showError("Error al realizar la solicitud:",r)}return!1})}addMessage(s,r){return i(this,null,function*(){try{let t=yield this.http.put(this.apiUrl+"/message/"+s._id,{message:r}).toPromise();if(t){let{messageSaved:e,message:a}=t;if(e)return e;this.showError("Error al mandar mensaje:",a)}}catch(t){this.showError("Error al realizar la solicitud:",t)}})}checkAvailability(s){return i(this,null,function*(){try{let r=yield this.http.get(this.apiUrl+"/checkAvailability/"+s._id).toPromise();if(r){let{message:t,requests:e,ok:a}=r;if(a)return{ok:a};if(e)return{requests:e};this.showError("Error al revisar la disponibilidad:",t)}}catch(r){this.showError("Error al realizar la solicitud:",r)}return{}})}showError(s,r){console.log("Error en el archivo: request.service.ts"),console.log(s,`
	`,c.showErrors?r:"")}};o.\u0275fac=function(r){return new(r||o)},o.\u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();export{g as a};
