import{a as C}from"./chunk-2J6QROK5.js";import{a as I,b as l,c as M,d as F,e as w,f as S,g as E,i as A,j as O,n as L}from"./chunk-BV3V6FZK.js";import{a as f,b as x}from"./chunk-27VCVRNY.js";import{a as q}from"./chunk-VVGBZAEW.js";import{e as y,f as R}from"./chunk-NBS3JSTV.js";import{a as B}from"./chunk-4NN27ZSM.js";import{a as _}from"./chunk-Y4UAUI7W.js";import{Ca as G,Ea as p,Ga as n,Ha as t,Ia as c,Ka as h,La as j,Ma as m,Oa as N,Ra as v,S as s,Sa as W,V as g,c as d,jb as P,ra as u,ub as V}from"./chunk-EGZLEYQ3.js";var $=(()=>{let e=class e{constructor(){this.formLogIn=new w({}),this._router=s(y),this._authService=s(f),this._waitingModalService=s(_)}ngOnInit(){this.formLogIn=new w({user:new S("",[l.required,l.minLength(4),l.maxLength(20)]),password:new S("",[l.required,l.minLength(4),l.maxLength(20)])})}login(){return d(this,null,function*(){if(this._waitingModalService.setIsWaiting(!0),this.formLogIn.valid){let{user:a,password:i}=this.formLogIn.value;(yield this._authService.logIn(a,i))?this._router.navigate(["/","home"]):this.alert={type:C.Danger,text:"Favor de verificar los datos",keep:!0}}this._waitingModalService.setIsWaiting(!1)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=g({type:e,selectors:[["app-log-in"]],standalone:!0,features:[v],decls:16,vars:2,consts:[[1,"container","d-flex","justify-content-center","align-items-center","vh-100"],[1,"p-5","form","rounded",3,"submit","formGroup"],[1,"text-center","mb-4"],[1,"my-3"],["for","user",1,"form-label"],["formControlName","user","type","text","id","user","placeholder","Usuario",1,"form-control"],["for","password",1,"form-label"],["formControlName","password","type","password","id","password","placeholder","********",1,"form-control"],[3,"alert"],[1,"row","mt-5","justify-content-center"],["type","submit",1,"col-10","btn","btn-lg","btn-outline-primary","btn-block"]],template:function(i,r){i&1&&(n(0,"main",0)(1,"form",1),h("submit",function(){return r.login()}),n(2,"h1",2),m(3,"Iniciar Sesi\xF3n"),t(),n(4,"div",3)(5,"label",4),m(6,"Usuario"),t(),c(7,"input",5),t(),n(8,"div",3)(9,"label",6),m(10,"Contrase\xF1a"),t(),c(11,"input",7),t(),c(12,"app-alert",8),n(13,"div",9)(14,"button",10),m(15,"Enviar"),t()()()()),i&2&&(u(),p("formGroup",r.formLogIn),u(11),p("alert",r.alert))},dependencies:[L,E,I,M,F,A,O,x],styles:["form[_ngcontent-%COMP%]{background-color:var(--background-color-1);max-width:35rem;width:100%}"]});let o=e;return o})();var z=(()=>{let e=class e{constructor(){this.formSignIn=new w({}),this._router=s(y),this._authService=s(f),this._alertService=s(B),this._waitingModalService=s(_)}ngOnInit(){this.formSignIn=new w({user:new S("",[l.required,l.minLength(4),l.maxLength(20)]),password:new S("",[l.required,l.minLength(4),l.maxLength(20)]),type:new S(2,[l.required,l.min(1),l.max(2)])})}signIn(){return d(this,null,function*(){if(this._waitingModalService.setIsWaiting(!0),this.formSignIn.valid){let{user:a,password:i,type:r}=this.formSignIn.value;(yield this._authService.signIn(a,i,r))?(this.alert={type:C.Success,text:"Usuario creado con \xE9xito",keep:!1},this._alertService.addAlert(this.alert),this._router.navigate(["/","home"])):this.alert={type:C.Danger,text:"Favor de verificar los datos",keep:!0}}this._waitingModalService.setIsWaiting(!1)})}singOut(){this._router.navigate(["/","auth","sign-out"])}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=g({type:e,selectors:[["app-sign-in"]],standalone:!0,features:[v],decls:23,vars:2,consts:[[1,"container","d-flex","justify-content-center","align-items-center","vh-100"],[1,"p-5","form","rounded",3,"submit","formGroup"],[1,"text-center","mb-4"],[1,"my-3"],["for","user",1,"form-label"],["formControlName","user","type","text","id","user","placeholder","Usuario",1,"form-control"],["for","password",1,"form-label"],["formControlName","password","type","text","id","password","placeholder","********",1,"form-control"],["for","type",1,"form-label"],["formControlName","type","type","text","id","type","placeholder","1 - Admin, 2 - User",1,"form-control"],[3,"alert"],[1,"row","mt-5","justify-content-center"],["type","submit",1,"col-10","btn","btn-lg","btn-outline-primary","btn-block"],["routerLinkActive","router-link-active",1,"col-6","btn","btn-lg","btn-outline-danger","btn-block",3,"click"]],template:function(i,r){i&1&&(n(0,"main",0)(1,"form",1),h("submit",function(){return r.signIn()}),n(2,"h1",2),m(3,"Crear Nuevo Usuario"),t(),n(4,"div",3)(5,"label",4),m(6,"Usuario"),t(),c(7,"input",5),t(),n(8,"div",3)(9,"label",6),m(10,"Contrase\xF1a"),t(),c(11,"input",7),t(),n(12,"div",3)(13,"label",8),m(14,"Tipo de usuario"),t(),c(15,"input",9),t(),c(16,"app-alert",10),n(17,"div",11)(18,"button",12),m(19,"Enviar"),t()(),n(20,"div",11)(21,"button",13),h("click",function(){return r.singOut()}),m(22," Eliminar Usuario "),t()()()()),i&2&&(u(),p("formGroup",r.formSignIn),u(15),p("alert",r.alert))},dependencies:[L,E,I,M,F,A,O,x],styles:["form[_ngcontent-%COMP%]{background-color:var(--background-color-1);max-width:35rem;width:100%}"]});let o=e;return o})();var H=(()=>{let e=class e{constructor(){this.deleteAll=!0,this._authService=s(f),this._waitingModalService=s(_)}changeDeleteAll(){this.deleteAll=!this.deleteAll}deleteUser(a){return d(this,null,function*(){if(this._waitingModalService.setIsWaiting(!0),this.users&&a){let i=yield this._authService.deleteUser(this.users,a,this.deleteAll)}this._waitingModalService.setIsWaiting(!1)})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=g({type:e,selectors:[["app-sign-out-card"]],inputs:{users:"users",user:"user"},standalone:!0,features:[v],decls:15,vars:2,consts:[[1,"card"],[1,"card-header"],[1,"h3"],[1,"h4"],[1,"card-body"],[1,"mb-3"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","deleteAll","checked","",1,"form-check-input",3,"click"],["for","deleteAll",1,"form-check-label"],[1,"card-footer","d-flex","justify-content-end"],[1,"btn","btn-lg",3,"click"],["src","assets/icons/danger.svg","alt","Eliminar",1,"icon"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1)(2,"p",2),m(3),t(),n(4,"p",3),m(5),t()(),n(6,"div",4)(7,"div",5)(8,"div",6)(9,"input",7),h("click",function(){return r.changeDeleteAll()}),t(),n(10,"label",8),m(11,"\xBFEliminar todo lo relacionado con el usuario?"),t()()()(),n(12,"div",9)(13,"button",10),h("click",function(){return r.deleteUser(r.user)}),c(14,"img",11),t()()()),i&2&&(u(3),N("Usuario: ",r.user==null?null:r.user.username,""),u(2),N("Tipo de usuario: ",r.user==null?null:r.user.type,""))},styles:["a[_ngcontent-%COMP%]{text-decoration:none}.icon[_ngcontent-%COMP%]{width:2rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]});let o=e;return o})();var Q=()=>["/","home"];function X(o,e){if(o&1&&(n(0,"div",6),c(1,"app-sign-out-card",7),t()),o&2){let k=e.$implicit,a=j();u(),p("user",k)("users",a.users)}}var J=(()=>{let e=class e{constructor(){this._authService=s(f)}ngOnInit(){return d(this,null,function*(){this.users=yield this._authService.getUsers()})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=g({type:e,selectors:[["app-sign-out"]],standalone:!0,features:[v],decls:6,vars:3,consts:[[1,"container-fluid"],[1,"row","mt-3"],[1,"col-12"],[1,"btn",3,"routerLink"],["src","assets/icons/home.svg","alt","Inicio",1,"icon"],["class","col-12 col-sm-6 col-md-4 mt-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-4","mt-4"],[3,"user","users"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),c(4,"img",4),t()(),G(5,X,2,2,"div",5),t()()),i&2&&(u(3),p("routerLink",W(2,Q)),u(2),p("ngForOf",r.users))},dependencies:[H,P,R],styles:["a[_ngcontent-%COMP%]{text-decoration:none}.icon[_ngcontent-%COMP%]{width:2rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]});let o=e;return o})();var T=(o,e)=>d(void 0,null,function*(){let k=s(q),a=s(y);if(k.get(V.tokenName)){let b=yield s(f).getUserInfo(),{type:U}=b;if(U&&U==1)return!0}return k.deleteAll(),a.navigate(["/","auth"]),!1});var $e=[{path:"log-in",component:$},{path:"sign-in",canActivate:[T],component:z},{path:"sign-out",component:J,canActivate:[T]},{path:"**",redirectTo:"log-in"}];export{$e as routes};
