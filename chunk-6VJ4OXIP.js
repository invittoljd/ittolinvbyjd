import{M as l,S as u,c as a,pb as m,ub as h}from"./chunk-EGZLEYQ3.js";var I=(()=>{let o=class o{constructor(){this.apiUrl=`${h.url}/api/itemRoutes`,this.http=u(m)}addItem(r,t){return a(this,null,function*(){try{let s=yield this.http.post(this.apiUrl,{category_id:r._id,item:t}).toPromise();if(s){let{item:e}=s;if(e)return r.items.push(e),e._id;this.showError("Error al crear item:",s.message)}}catch(s){this.showError("Error al realizar la solicitud:",s)}})}getIconsItems(){return[{src:"assets/categories/acid.svg"},{src:"assets/categories/base.svg"},{src:"assets/categories/gold.svg"},{src:"assets/categories/ingot.svg"},{src:"assets/categories/radioactive.svg"}]}editItem(r){return a(this,null,function*(){try{let t=yield this.http.put(this.apiUrl+"/"+r._id,{item:r}).toPromise();if(t){let{message:s,item:e}=t;if(e)return!0;this.showError("Error al editar item:",s)}}catch(t){this.showError("Error al realizar la solicitud:",t)}return!1})}deleteItem(r,t){return a(this,null,function*(){try{let s=yield this.http.delete(this.apiUrl+"/"+t).toPromise();if(s){let{message:e,ok:n}=s;if(n){let i=r.items.findIndex(d=>d._id===t);return i!==-1&&r.items.splice(i,1),!0}this.showError("Error al eliminar el item:",e)}}catch(s){this.showError("Error al realizar la solicitud:",s)}return!1})}addStockToItem(r,t){return a(this,null,function*(){if(r._id&&r.stock!=null){let s=yield this.http.put(this.apiUrl+"/"+r._id+"/addStock",{quantity:t}).toPromise();if(s){let{ok:e}=s;return r.stock+=t,e}}return!1})}requestItem(r,t,s,e,n){return a(this,null,function*(){if(r.stock){let i={date:new Date(Date.now()),item:r,status:!1,description:s,quantity:t};return e&&n&&(i.datetimeStart=e,i.datetimeEnd=n),i}})}showError(r,t){console.log("Error en el archivo: item.service.ts"),console.log(r,`
	`,h.showErrors?t:"")}};o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"});let c=o;return c})();export{I as a};
