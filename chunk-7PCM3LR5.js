import{a as M}from"./chunk-MFEEBNY5.js";import{a as O,b as k,c as G,d as R,e as h,f as $,g as j,i as H,j as V,l as W}from"./chunk-DPCFOK5P.js";import{i as T,j as N,u as q}from"./chunk-5AJDWTEN.js";import{Ia as p,Ka as c,Ma as i,Na as n,Oa as g,Qa as w,Ra as x,Sa as l,Ta as C,V as f,Va as E,Xa as F,Y as D,d as I,va as a}from"./chunk-I2XZS25C.js";function z(e,t){if(e&1&&(i(0,"p"),l(1),n()),e&2){let r=t.$implicit;a(),E(" ",r.item.title," (User: ",r.username,") (ID: ",r._id,") ")}}function B(e,t){if(e&1&&(i(0,"tr")(1,"th",17),l(2),n(),i(3,"td"),p(4,z,2,3,"p",16),n()()),e&2){let r=t.$implicit;a(2),C(r.time),a(2),c("ngForOf",r.requests)}}function J(e,t){if(e&1&&(i(0,"table",12)(1,"thead",13)(2,"tr")(3,"th",14),l(4,"Hora"),n(),i(5,"th",14),l(6,"Informaci\xF3n"),n()()(),i(7,"tbody",15),p(8,B,5,2,"tr",16),n()()),e&2){let r=x();a(8),c("ngForOf",r.schedule)}}function K(e,t){e&1&&(i(0,"div",18),l(1," No se encontrar\xF3n solicitudes para esta fecha. "),n())}var A=(()=>{let t=class t{constructor(){this.schedule=[],this.formDate=new h({}),this._waitingModalService=f(q),this._requestService=f(M)}ngOnInit(){let o=new Date().toISOString().substring(0,10);this.formDate=new h({date:new $(o,[k.required])})}submit(){return I(this,null,function*(){if(this.formDate.valid){let{date:s}=this.formDate.value;this._waitingModalService.setIsWaiting(!0),this.requests=yield this._requestService.getRequestsToday(s),this.generateSchedule(this.requests,s),this._waitingModalService.setIsWaiting(!1)}})}generateSchedule(s,o){let m=[],[b,P,U]=o.split("-").map(Number),v=new Date(b,P-1,U);for(let d=0;d<24;d++){let _=new Date(v);_.setHours(d,0,0,0);let y=new Date(v);y.setHours(d+1,0,0,0);let S=s.filter(u=>u.datetimeStart&&u.datetimeEnd?new Date(u.datetimeStart).getTime()<y.getTime()&&new Date(u.datetimeEnd).getTime()>_.getTime():!1);S.length>0&&m.push({time:`${d}:00 - ${d+1}:00`,requests:S})}this.schedule=m}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=D({type:t,selectors:[["app-itinerary"]],standalone:!0,features:[F],decls:13,vars:3,consts:[[1,"container","mt-4","p-4","custom-background","rounded"],[1,"row"],[1,"col-12","mb-4"],[1,"h1","text-center"],[1,""],[1,"row","justify-content-center",3,"submit","formGroup"],[1,"col-12","col-md-6","col-lg-3"],["formControlName","date","type","date","name","date","id","date",1,"form-control","text-center"],[1,"col-12","d-flex","justify-content-end","mt-4"],["type","submit","name","submit","id","submit","value","Obtener",1,"btn","btn-lg","btn-outline-dark"],["class","table table-bordered mt-4 table-striped",4,"ngIf"],["class","alert alert-info mt-4",4,"ngIf"],[1,"table","table-bordered","mt-4","table-striped"],[1,"table-dark","text-center"],["scope","col"],[1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"alert","alert-info","mt-4"]],template:function(o,m){o&1&&(i(0,"main",0)(1,"div",1)(2,"div",2)(3,"p",3),l(4,"Itinerario del d\xEDa"),n()(),i(5,"div",4)(6,"form",5),w("submit",function(){return m.submit()}),i(7,"div",6),g(8,"input",7),n(),i(9,"div",8),g(10,"input",9),n()()()(),p(11,J,9,1,"table",10)(12,K,2,0,"div",11),n()),o&2&&(a(6),c("formGroup",m.formDate),a(5),c("ngIf",m.schedule.length>0),a(),c("ngIf",m.schedule.length===0))},dependencies:[W,j,O,G,R,H,V,N,T],styles:[".custom-background[_ngcontent-%COMP%]{background-color:#fff6}"]});let e=t;return e})();var ae=[{path:"",component:A},{path:"**",redirectTo:""}];export{ae as routes};
