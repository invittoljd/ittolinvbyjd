import{a as ce}from"./chunk-2SPDF5QU.js";import{a as de}from"./chunk-MFEEBNY5.js";import{a as F}from"./chunk-M54UVILV.js";import{a as A}from"./chunk-2J6QROK5.js";import{a as L,b as c,c as q,d as U,e as M,f as b,g as j,h as Z,i as G,j as B,k as se,l as z}from"./chunk-DPCFOK5P.js";import{c as ne,e as re}from"./chunk-E474WPJZ.js";import{a as O}from"./chunk-G5EOFEDL.js";import{h as Q,i as P,j as I,o as K,t as X,u as Y}from"./chunk-5AJDWTEN.js";import{Ia as v,Ka as d,Ma as o,Na as n,Oa as m,P as J,Pa as w,Qa as g,Ra as h,Sa as s,Ta as $,Ua as H,V as f,Xa as y,Y as _,d as S,da as le,ea as k,fa as x,la as R,sa as D,va as l}from"./chunk-I2XZS25C.js";function Me(a,r){a&1&&m(0,"img",13)}function Fe(a,r){if(a&1&&(o(0,"button",11),v(1,Me,1,0,"img",12),n()),a&2){let u=h();l(),d("ngIf",u.isAdmin())}}var me=(()=>{let r=class r{constructor(){this.areaSelectedEvent=new R,this.link=["/","home","categories"],this._sessionService=f(F),this._router=f(re)}isAdmin(){return this._sessionService.isAdmin()}setAreaSelected(t){t&&this.areaSelectedEvent.emit(t)}navigate(){this.areaItem&&this._router.navigate([...this.link,this.areaItem._id])}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-area-card"]],inputs:{areaItem:"areaItem"},outputs:{areaSelectedEvent:"areaSelectedEvent"},standalone:!0,features:[y],decls:12,vars:3,consts:[[1,"card","border-dark","mt-3"],[1,"card-header","h6","text-center"],[1,"card-body"],["alt","",1,"img-fluid",3,"src"],[1,"card-footer"],[1,"d-flex","justify-content-between",3,"click"],["data-bs-toggle","modal","data-bs-target","#modalInformation","type","button","title","Informaci\xF3n",1,"btn"],["src","assets/icons/information.svg","alt","Informaci\xF3n",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalEdit","type","button","class","btn","title","Modificar",4,"ngIf"],["type","button","title","Ingresar",1,"btn",3,"click"],["src","assets/icons/show.svg","alt","Ingresar",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalEdit","type","button","title","Modificar",1,"btn"],["class","icon","src","assets/icons/edit.svg","alt","Editar",4,"ngIf"],["src","assets/icons/edit.svg","alt","Editar",1,"icon"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"p",1),s(2),n(),o(3,"div",2),m(4,"img",3),n(),o(5,"div",4)(6,"div",5),g("click",function(){return e.setAreaSelected(e.areaItem)}),o(7,"button",6),m(8,"img",7),n(),v(9,Fe,2,1,"button",8),o(10,"button",9),g("click",function(){return e.navigate()}),m(11,"img",10),n()()()()),i&2&&(l(2),$(e.areaItem==null?null:e.areaItem.title),l(2),d("src",e.areaItem==null?null:e.areaItem.src,D),l(5),d("ngIf",e.isAdmin()))},dependencies:[I],styles:[".icon[_ngcontent-%COMP%]{width:1.25rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]});let a=r;return a})();function Ne(a,r){a&1&&(o(0,"button",3),m(1,"img",4),n())}function Te(a,r){if(a&1){let u=w();o(0,"div",5)(1,"app-area-card",6),g("areaSelectedEvent",function(i){k(u);let e=h();return x(e.setAreaSelected(i))}),n()()}if(a&2){let u=r.$implicit;l(),d("areaItem",u)}}var pe=(()=>{let r=class r{constructor(){this.areaSelectedEvent=new R,this._sessionService=f(F)}isAdmin(){return this._sessionService.isAdmin()}setAreaSelected(t){this.areaSelectedEvent.emit(t)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-area-cards"]],inputs:{areas:"areas"},outputs:{areaSelectedEvent:"areaSelectedEvent"},standalone:!0,features:[y],decls:3,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#modalAdd","class","btn mt-4 mb-2",4,"ngIf"],[1,"row"],["class","col-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#modalAdd",1,"btn","mt-4","mb-2"],["src","assets/icons/add.svg","alt","Agregar \xC1rea","title","Agregar \xC1rea",1,"icon"],[1,"col-6","col-md-4","col-lg-3"],[3,"areaSelectedEvent","areaItem"]],template:function(i,e){i&1&&(v(0,Ne,2,0,"button",0),o(1,"div",1),v(2,Te,2,1,"div",2),n()),i&2&&(d("ngIf",e.isAdmin()),l(2),d("ngForOf",e.areas))},dependencies:[me,P,I],styles:[".icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]});let a=r;return a})();var W=(()=>{let r=class r{constructor(){this.apiUrl=`${X.url}/api/areas`,this.http=f(K)}getIconsAreas(){return[{src:"assets/areas/analytics.svg"},{src:"assets/areas/atomic.svg"},{src:"assets/areas/biology.svg"},{src:"assets/areas/chemical.svg"},{src:"assets/areas/computer.svg"},{src:"assets/areas/education.svg"},{src:"assets/areas/health.svg"},{src:"assets/areas/industrial.svg"},{src:"assets/areas/laboratory.svg"},{src:"assets/areas/math.svg"},{src:"assets/areas/physic.svg"},{src:"assets/areas/physicochemical.svg"}]}getAreas(){return S(this,null,function*(){try{let t=yield this.http.get(this.apiUrl).toPromise();if(t){let{message:i,areas:e}=t;if(e)return e;console.log("Error al obtener \xE1reas:",i)}}catch(t){console.log("Error al realizar la solicitud:",t)}return[]})}getArea(t){return S(this,null,function*(){try{let i=yield this.http.get(this.apiUrl+"/"+t).toPromise();if(i){let{message:e,area:p}=i;if(p)return p;console.log("Error al obtener \xE1rea:",e)}}catch(i){console.log("Error al realizar la solicitud:",i)}})}deleteArea(t,i){return S(this,null,function*(){try{let e=yield this.http.delete(this.apiUrl+"/"+i).toPromise();if(e){let{message:p,ok:C}=e;if(C){let E=t.findIndex(T=>T._id===i);return E!==-1&&t.splice(E,1),!0}console.log("Error al eliminar el \xE1rea:",p)}}catch(e){console.log("Error al realizar la solicitud:",e)}return!1})}addArea(t,i){return S(this,null,function*(){try{let e=yield this.http.post(this.apiUrl,{area:i}).toPromise();if(e){let{area:p}=e;if(p)return t.push(p),p._id;console.log("Error al crear \xE1rea:",e.message)}}catch(e){console.log("Error al realizar la solicitud:",e)}})}editArea(t){return S(this,null,function*(){try{let i=yield this.http.put(this.apiUrl+"/"+t._id,{area:t}).toPromise();if(i){let{message:e,area:p}=i;if(p)return!0;console.log("Error al editar \xE1rea:",e)}}catch(i){console.log("Error al realizar la solicitud:",i)}return!1})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=J({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();function Ve(a,r){if(a&1){let u=w();o(0,"img",19),g("click",function(){let i=k(u).$implicit,e=h();return x(e.selectIcon(i))}),n()}if(a&2){let u=r.$implicit,t=h();d("src",u.src,D)("ngClass",t.iconSelected==u?"selected":"")}}var ue=(()=>{let r=class r{constructor(){this.formAreaAdd=new M({}),this._areaService=f(W),this._alertService=f(O)}ngOnInit(){this.formAreaAdd=new M({title:new b("",[c.required,c.minLength(1),c.maxLength(50)]),information:new b("",[c.required,c.minLength(5),c.maxLength(500)])}),this.iconsAreas=this._areaService.getIconsAreas()}selectIcon(t){this.iconSelected=t}areaAdd(){return S(this,null,function*(){let t={keep:!1,text:"Error al agregar \xC1rea, favor de revisar",type:A.Danger};if(this.formAreaAdd.valid&&this.iconSelected&&this.areas){let{title:i,information:e}=this.formAreaAdd.value,p={title:i,information:e,src:this.iconSelected.src,categories:[]};(yield this._areaService.addArea(this.areas,p))&&(this.formAreaAdd.reset(),t={keep:!1,text:"\xC1rea agregada con \xE9xito",type:A.Success})}this._alertService.addAlert(t)})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-area-add"]],inputs:{areas:"areas"},standalone:!0,features:[y],decls:26,vars:2,consts:[["id","modalAdd","tabindex","-1","aria-labelledby","modalAddLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalAddLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"mb-3"],["for","title"],["formControlName","title","type","text","id","title","placeholder","Nombre del \xC1rea",1,"form-control"],["for","information",1,"form-label"],["formControlName","information","id","information","placeholder","\xC1rea encargada de...","rows","5",1,"form-control"],["for","profileImage",1,"form-label"],[1,"d-flex","flex-wrap","justify-content-around"],["class","img img-thumbnail p-2 m-2","alt","",3,"src","ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["data-bs-dismiss","modal","type","submit","title","Agregar",1,"btn"],["src","assets/icons/ok.svg","alt","",1,"icon"],["alt","",1,"img","img-thumbnail","p-2","m-2",3,"click","src","ngClass"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),s(5,"Agregar \xC1rea"),n(),m(6,"button",5),n(),o(7,"form",6),g("ngSubmit",function(){return e.areaAdd()}),o(8,"div",7)(9,"div",8)(10,"label",9),s(11,"Nombre del \xC1rea"),n(),m(12,"input",10),n(),o(13,"div",8)(14,"label",11),s(15,"Informaci\xF3n sobre el \xC1rea"),n(),m(16,"textarea",12),n(),o(17,"div",8)(18,"div",8)(19,"label",13),s(20,"Imagen de Perfil del \xC1rea"),n(),o(21,"div",14),v(22,Ve,1,2,"img",15),n()()()(),o(23,"div",16)(24,"button",17),m(25,"img",18),n()()()()()()),i&2&&(l(7),d("formGroup",e.formAreaAdd),l(15),d("ngForOf",e.iconsAreas))},dependencies:[z,j,L,q,U,G,B,Q,P],styles:[".img[_ngcontent-%COMP%]:hover, .selected[_ngcontent-%COMP%]{background-color:var(--background-color-3)}.img[_ngcontent-%COMP%]{width:4rem;cursor:pointer;border:none}.icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]});let a=r;return a})();function De(a,r){if(a&1){let u=w();o(0,"img",25),g("click",function(){let i=k(u).$implicit,e=h(2);return x(e.selectIcon(i))}),n()}if(a&2){let u=r.$implicit,t=h(2);d("src",u.src,D)("ngClass",t.iconSelected==u?"selected":"")}}function Pe(a,r){if(a&1&&(o(0,"div",8)(1,"label",22),s(2,"Imagen de Perfil del \xC1rea"),n(),o(3,"div",23),v(4,De,1,2,"img",24),n()()),a&2){let u=h();l(4),d("ngForOf",u.iconsAreas)}}var fe=(()=>{let r=class r{constructor(){this.formAreaEdit=new M({}),this.editIcon=!1,this._areaService=f(W),this._alertService=f(O)}ngOnInit(){this.formAreaEdit=new M({title:new b("",[c.required,c.minLength(1),c.maxLength(20)]),information:new b("",[c.required,c.minLength(5),c.maxLength(255)])}),this.iconsAreas=this._areaService.getIconsAreas()}changeEditIcon(){this.editIcon=!this.editIcon}selectIcon(t){this.iconSelected=t}areaEdit(){return S(this,null,function*(){let t={keep:!1,text:"Error al modificar \xC1rea, favor de revisar",type:A.Danger};if(this.areaSelected){let{title:i,information:e}=this.formAreaEdit.value;i&&(this.areaSelected.title=i),e&&(this.areaSelected.information=e),this.editIcon&&this.iconSelected&&(this.areaSelected.src=this.iconSelected.src),(yield this._areaService.editArea(this.areaSelected))&&(t={keep:!1,text:"\xC1rea modificada con \xE9xito",type:A.Success})}this._alertService.addAlert(t)})}deleteArea(){return S(this,null,function*(){let t={keep:!1,text:"Error al eliminar \xC1rea, favor de revisar",type:A.Danger};this.areas&&this.areaSelected?._id&&(yield this._areaService.deleteArea(this.areas,this.areaSelected._id))&&(t={keep:!1,text:"\xC1rea eliminada con \xE9xito",type:A.Success}),this._alertService.addAlert(t)})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-area-edit"]],inputs:{areas:"areas",areaSelected:"areaSelected"},standalone:!0,features:[y],decls:28,vars:4,consts:[["id","modalEdit","tabindex","-1","aria-labelledby","modalEditLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalEditLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"mb-3"],["for","title"],["formControlName","title","type","text","id","title","placeholder","Nombre del \xC1rea",1,"form-control",3,"value"],["for","information",1,"form-label"],["formControlName","information","id","information","placeholder","\xC1rea encargada de...","rows","5",1,"form-control",3,"value"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","editIcon",1,"form-check-input",3,"click"],["for","editIcon",1,"form-check-label"],["class","mb-3",4,"ngIf"],[1,"modal-footer","justify-content-between"],["data-bs-dismiss","modal","type","button","title","Eliminar",1,"btn","danger",3,"click"],["src","assets/icons/danger.svg","alt","Eliminar",1,"icon"],["data-bs-dismiss","modal","type","submit","title","Editar",1,"btn"],["src","assets/icons/ok.svg","alt","Aceptar",1,"icon"],["for","profileImage",1,"form-label"],[1,"d-flex","flex-wrap","justify-content-around"],["class","img img-thumbnail p-2 m-2","alt","",3,"src","ngClass","click",4,"ngFor","ngForOf"],["alt","",1,"img","img-thumbnail","p-2","m-2",3,"click","src","ngClass"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),s(5,"Editar \xC1rea"),n(),m(6,"button",5),n(),o(7,"form",6),g("ngSubmit",function(){return e.areaEdit()}),o(8,"div",7)(9,"div",8)(10,"label",9),s(11,"Nombre del \xC1rea"),n(),m(12,"input",10),n(),o(13,"div",8)(14,"label",11),s(15,"Informaci\xF3n sobre el \xC1rea"),n(),m(16,"textarea",12),n(),o(17,"div",8)(18,"div",13)(19,"input",14),g("click",function(){return e.changeEditIcon()}),n(),o(20,"label",15),s(21,"\xBFCambiar imagen de perfil del \xE1rea?"),n()()(),v(22,Pe,5,1,"div",16),n(),o(23,"div",17)(24,"button",18),g("click",function(){return e.deleteArea()}),m(25,"img",19),n(),o(26,"button",20),m(27,"img",21),n()()()()()()),i&2&&(l(7),d("formGroup",e.formAreaEdit),l(5),d("value",e.areaSelected==null?null:e.areaSelected.title),l(4),d("value",e.areaSelected==null?null:e.areaSelected.information),l(6),d("ngIf",e.editIcon))},dependencies:[z,j,L,q,U,G,B,Q,P,I],styles:[".img[_ngcontent-%COMP%]:hover, .selected[_ngcontent-%COMP%]{background-color:var(--background-color-3)}.img[_ngcontent-%COMP%]{width:4rem;cursor:pointer;border:none}.icon[_ngcontent-%COMP%]{width:2.5rem}.danger[_ngcontent-%COMP%]:hover{background-color:var(--background-color-4)!important}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]});let a=r;return a})();var ge=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-area-information"]],inputs:{areaSelected:"areaSelected"},standalone:!0,features:[y],decls:18,vars:2,consts:[["id","modalInformation","tabindex","-1","aria-labelledby","modalInformationLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalInformationLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["for","title",1,"fw-bold"],["id","title"],["for","information",1,"form-label","fw-bold"],["id","information"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),s(5,"Informaci\xF3n del \xC1rea"),n(),m(6,"button",5),n(),o(7,"div",6)(8,"div",7)(9,"label",8),s(10,"Nombre del \xC1rea"),n(),o(11,"p",9),s(12),n()(),o(13,"div",7)(14,"label",10),s(15,"Informaci\xF3n sobre el \xC1rea"),n(),o(16,"p",11),s(17),n()()()()()()),i&2&&(l(12),H(" ",e.areaSelected==null?null:e.areaSelected.title," "),l(5),H(" ",e.areaSelected==null?null:e.areaSelected.information," "))},styles:["p[_ngcontent-%COMP%]{text-align:justify}"]});let a=r;return a})();function Oe(a,r){if(a&1&&m(0,"app-area-add",9),a&2){let u=h();d("areas",u.areas)}}function Le(a,r){if(a&1&&m(0,"app-area-edit",10),a&2){let u=h();d("areas",u.areas)("areaSelected",u.areaSelected)}}var ve=(()=>{let r=class r{constructor(){this._sessionService=f(F),this._areasService=f(W),this._waitingModalService=f(Y)}isAdmin(){return this._sessionService.isAdmin()}ngOnInit(){return S(this,null,function*(){this._waitingModalService.setIsWaiting(!0),this.areas=yield this._areasService.getAreas(),this._waitingModalService.setIsWaiting(!1)})}setAreaSelected(t){this.areaSelected=t}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-areas"]],standalone:!0,features:[y],decls:11,vars:4,consts:[[1,"container"],[1,"col-12"],[1,"custom-header","p-5","rounded","text-center","mt-3"],[1,"title","fw-bold"],[1,"row"],[3,"areaSelectedEvent","areas"],[3,"areas",4,"ngIf"],[3,"areas","areaSelected",4,"ngIf"],[3,"areaSelected"],[3,"areas"],[3,"areas","areaSelected"]],template:function(i,e){i&1&&(o(0,"main",0)(1,"div",1)(2,"div",2)(3,"p",3),s(4,"\xC1reas"),n()()(),o(5,"div",1)(6,"div",4)(7,"app-area-cards",5),g("areaSelectedEvent",function(C){return e.setAreaSelected(C)}),n()()()(),v(8,Oe,1,1,"app-area-add",6)(9,Le,1,2,"app-area-edit",7),m(10,"app-area-information",8)),i&2&&(l(7),d("areas",e.areas),l(),d("ngIf",e.isAdmin()),l(),d("ngIf",e.isAdmin()),l(),d("areaSelected",e.areaSelected))},dependencies:[pe,ue,fe,ge,I],styles:[".title[_ngcontent-%COMP%]{font-size:2rem}.custom-header[_ngcontent-%COMP%]{background-color:#fff6}.img[_ngcontent-%COMP%]:hover{background:#00000080}.img[_ngcontent-%COMP%]{cursor:pointer}"]});let a=r;return a})();function qe(a,r){a&1&&(o(0,"button",11),m(1,"img",12),n())}var he=(()=>{let r=class r{constructor(){this.categorySelectedEvent=new R,this.link=["/","home","items"],this._sessionService=f(F),this._router=f(re)}isAdmin(){return this._sessionService.isAdmin()}setCategorySelected(t){t&&this.categorySelectedEvent.emit(t)}navigate(){this.areaSelected&&this.categoryItem&&this._router.navigate([...this.link,this.areaSelected._id,this.categoryItem._id])}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-category-card"]],inputs:{areaSelected:"areaSelected",categoryItem:"categoryItem"},outputs:{categorySelectedEvent:"categorySelectedEvent"},standalone:!0,features:[y],decls:12,vars:3,consts:[[1,"card","border-dark","mt-3"],[1,"card-header","h6","text-center"],[1,"card-body"],["alt","",1,"img-fluid",3,"src"],[1,"card-footer"],[1,"d-flex","justify-content-between",3,"click"],["data-bs-toggle","modal","data-bs-target","#modalInformation","type","button","title","Informaci\xF3n",1,"btn"],["src","assets/icons/information.svg","alt","Informaci\xF3n",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalEdit","type","button","class","btn","title","Modificar",4,"ngIf"],["type","button","title","Ingresar",1,"btn",3,"click"],["src","assets/icons/show.svg","alt","Ingresar",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalEdit","type","button","title","Modificar",1,"btn"],["src","assets/icons/edit.svg","alt","Editar",1,"icon"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"p",1),s(2),n(),o(3,"div",2),m(4,"img",3),n(),o(5,"div",4)(6,"div",5),g("click",function(){return e.setCategorySelected(e.categoryItem)}),o(7,"button",6),m(8,"img",7),n(),v(9,qe,2,0,"button",8),o(10,"button",9),g("click",function(){return e.navigate()}),m(11,"img",10),n()()()()),i&2&&(l(2),$(e.categoryItem==null?null:e.categoryItem.title),l(2),d("src",e.categoryItem==null?null:e.categoryItem.src,D),l(5),d("ngIf",e.isAdmin()))},dependencies:[I],styles:[".icon[_ngcontent-%COMP%]{width:1.25rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]});let a=r;return a})();function Ue(a,r){a&1&&(o(0,"button",3),m(1,"img",4),n())}function je(a,r){if(a&1){let u=w();o(0,"div",5)(1,"app-category-card",6),g("categorySelectedEvent",function(i){k(u);let e=h();return x(e.setCategorySelected(i))}),n()()}if(a&2){let u=r.$implicit,t=h();l(),d("areaSelected",t.areaSelected)("categoryItem",u)}}var Se=(()=>{let r=class r{constructor(){this.categorySelectedEvent=new R,this._sessionService=f(F)}isAdmin(){return this._sessionService.isAdmin()}setCategorySelected(t){this.categorySelectedEvent.emit(t)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-category-cards"]],inputs:{areaSelected:"areaSelected",categories:"categories"},outputs:{categorySelectedEvent:"categorySelectedEvent"},standalone:!0,features:[y],decls:3,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#modalAdd","class","btn mt-4 mb-2",4,"ngIf"],[1,"row"],["class","col-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#modalAdd",1,"btn","mt-4","mb-2"],["src","assets/icons/add.svg","alt","Agregar Categor\xEDa","title","Agregar Categor\xEDa",1,"icon"],[1,"col-6","col-md-4","col-lg-3"],[3,"categorySelectedEvent","areaSelected","categoryItem"]],template:function(i,e){i&1&&(v(0,Ue,2,0,"button",0),o(1,"div",1),v(2,je,2,2,"div",2),n()),i&2&&(d("ngIf",e.isAdmin()),l(2),d("ngForOf",e.categories))},dependencies:[he,P,I],styles:[".icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]});let a=r;return a})();var te=(()=>{let r=class r{constructor(){this.apiUrl=`${X.url}/api/categories`,this.http=f(K)}getCategory(t){return S(this,null,function*(){try{let i=yield this.http.get(this.apiUrl+"/"+t).toPromise();if(i){let{message:e,category:p}=i;if(p)return p;console.log("Error al obtener la categor\xEDa:",e)}}catch(i){console.log("Error al realizar la solicitud:",i)}})}deleteCategory(t,i){return S(this,null,function*(){try{let e=yield this.http.delete(this.apiUrl+"/"+i).toPromise();if(e){let{message:p,ok:C}=e;if(C){let E=t.findIndex(T=>T._id===i);return E!==-1&&t.splice(E,1),!0}console.log("Error al eliminar la categor\xEDa:",p)}}catch(e){console.log("Error al realizar la solicitud:",e)}return!1})}addCategory(t,i,e){return S(this,null,function*(){try{let p=yield this.http.post(this.apiUrl,{area_id:t,category:e}).toPromise();if(p){let{category:C}=p;if(C)return i.push(C),C._id;console.log("Error al crear categor\xEDa:",p.message)}}catch(p){console.log("Error al realizar la solicitud:",p)}})}getIconsCategories(){return[{src:"assets/categories/inventory.svg"},{src:"assets/categories/equipment.svg"},{src:"assets/categories/acid.svg"},{src:"assets/categories/base.svg"},{src:"assets/categories/radioactive.svg"}]}editCategory(t){return S(this,null,function*(){try{let i=yield this.http.put(this.apiUrl+"/"+t._id,{category:t}).toPromise();if(i){let{message:e,category:p}=i;if(p)return!0;console.log("Error al editar categor\xEDa:",e)}}catch(i){console.log("Error al realizar la solicitud:",i)}return!1})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=J({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();function Ge(a,r){if(a&1){let u=w();o(0,"img",19),g("click",function(){let i=k(u).$implicit,e=h();return x(e.selectIcon(i))}),n()}if(a&2){let u=r.$implicit,t=h();d("src",u.src,D)("ngClass",t.iconSelected==u?"selected":"")}}var be=(()=>{let r=class r{constructor(){this.formCategoryAdd=new M({}),this._categoryService=f(te),this._alertService=f(O)}ngOnInit(){this.formCategoryAdd=new M({title:new b("",[c.required,c.minLength(1),c.maxLength(20)]),information:new b("",[c.required,c.minLength(5),c.maxLength(255)])}),this.iconsCategories=this._categoryService.getIconsCategories()}selectIcon(t){this.iconSelected=t}categoryAdd(){return S(this,null,function*(){let t={keep:!1,text:"Error al agregar Categor\xEDa, favor de revisar",type:A.Danger};if(this.formCategoryAdd.valid&&this.iconSelected&&this.areaSelected&&this.areaSelected._id){let{title:i,information:e}=this.formCategoryAdd.value,p={title:i,information:e,src:this.iconSelected.src,items:[]},C=yield this._categoryService.addCategory(this.areaSelected._id,this.areaSelected.categories,p);p._id=C,C&&(this.formCategoryAdd.reset(),t={keep:!1,text:"Categor\xEDa agregada con \xE9xito",type:A.Success})}this._alertService.addAlert(t)})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-category-add"]],inputs:{areaSelected:"areaSelected"},standalone:!0,features:[y],decls:26,vars:2,consts:[["id","modalAdd","tabindex","-1","aria-labelledby","modalAddLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalAddLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"mb-3"],["for","title"],["formControlName","title","type","text","id","title","placeholder","Nombre de la Categor\xEDa",1,"form-control"],["for","information",1,"form-label"],["formControlName","information","id","information","placeholder","Categor\xEDa encargada de...","rows","5",1,"form-control"],["for","profileImage",1,"form-label"],[1,"d-flex","flex-wrap","justify-content-around"],["class","img img-thumbnail p-2 m-2","alt","",3,"src","ngClass","click",4,"ngFor","ngForOf"],[1,"modal-footer"],["data-bs-dismiss","modal","type","submit","title","Agregar",1,"btn"],["src","assets/icons/ok.svg","alt","",1,"icon"],["alt","",1,"img","img-thumbnail","p-2","m-2",3,"click","src","ngClass"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),s(5,"Agregar Categor\xEDa"),n(),m(6,"button",5),n(),o(7,"form",6),g("ngSubmit",function(){return e.categoryAdd()}),o(8,"div",7)(9,"div",8)(10,"label",9),s(11,"Nombre de la Categor\xEDa"),n(),m(12,"input",10),n(),o(13,"div",8)(14,"label",11),s(15,"Informaci\xF3n sobre la Categor\xEDa"),n(),m(16,"textarea",12),n(),o(17,"div",8)(18,"div",8)(19,"label",13),s(20,"Imagen de Perfil de la Categor\xEDa"),n(),o(21,"div",14),v(22,Ge,1,2,"img",15),n()()()(),o(23,"div",16)(24,"button",17),m(25,"img",18),n()()()()()()),i&2&&(l(7),d("formGroup",e.formCategoryAdd),l(15),d("ngForOf",e.iconsCategories))},dependencies:[z,j,L,q,U,G,B,Q,P],styles:[".img[_ngcontent-%COMP%]:hover, .selected[_ngcontent-%COMP%]{background-color:var(--background-color-3)}.img[_ngcontent-%COMP%]{width:4rem;cursor:pointer;border:none}.icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]});let a=r;return a})();var _e=(()=>{let r=class r{};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-category-information"]],inputs:{categorySelected:"categorySelected"},standalone:!0,features:[y],decls:18,vars:2,consts:[["id","modalInformation","tabindex","-1","aria-labelledby","modalInformationLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalInformationLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["for","title",1,"fw-bold"],["id","title"],["for","information",1,"form-label","fw-bold"],["id","information"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),s(5,"Informaci\xF3n de la Categor\xEDa"),n(),m(6,"button",5),n(),o(7,"div",6)(8,"div",7)(9,"label",8),s(10,"Nombre de la Categor\xEDa:"),n(),o(11,"p",9),s(12),n()(),o(13,"div",7)(14,"label",10),s(15,"Informaci\xF3n sobre el \xC1rea:"),n(),o(16,"p",11),s(17),n()()()()()()),i&2&&(l(12),H(" ",e.categorySelected==null?null:e.categorySelected.title," "),l(5),H(" ",e.categorySelected==null?null:e.categorySelected.information," "))},styles:["p[_ngcontent-%COMP%]{text-align:justify}"]});let a=r;return a})();function Be(a,r){if(a&1){let u=w();o(0,"img",25),g("click",function(){let i=k(u).$implicit,e=h(2);return x(e.selectIcon(i))}),n()}if(a&2){let u=r.$implicit,t=h(2);d("src",u.src,D)("ngClass",t.iconSelected==u?"selected":"")}}function ze(a,r){if(a&1&&(o(0,"div",8)(1,"label",22),s(2,"Imagen de Perfil de la Categor\xEDa"),n(),o(3,"div",23),v(4,Be,1,2,"img",24),n()()),a&2){let u=h();l(4),d("ngForOf",u.iconsCategories)}}var ye=(()=>{let r=class r{constructor(){this.formCategoryEdit=new M({}),this.editIcon=!1,this._categoryService=f(te),this._alertService=f(O)}ngOnInit(){this.formCategoryEdit=new M({title:new b("",[c.required,c.minLength(1),c.maxLength(20)]),information:new b("",[c.required,c.minLength(5),c.maxLength(255)])}),this.iconsCategories=this._categoryService.getIconsCategories()}changeEditIcon(){this.editIcon=!this.editIcon}selectIcon(t){this.iconSelected=t}categoryEdit(){return S(this,null,function*(){let t={keep:!1,text:"Error al modificar la Categor\xEDa, favor de revisar",type:A.Danger};if(this.categorySelected){let{title:i,information:e}=this.formCategoryEdit.value;i&&(this.categorySelected.title=i),e&&(this.categorySelected.information=e),this.editIcon&&this.iconSelected&&(this.categorySelected.src=this.iconSelected.src),(yield this._categoryService.editCategory(this.categorySelected))&&(t={keep:!1,text:"Categor\xEDa modificada con \xE9xito",type:A.Success})}this._alertService.addAlert(t)})}deleteCategory(){return S(this,null,function*(){let t={keep:!1,text:"Error al eliminar Categor\xEDa, favor de revisar",type:A.Danger};this.areaSelected&&this.categorySelected?._id&&(yield this._categoryService.deleteCategory(this.areaSelected.categories,this.categorySelected._id))&&(t={keep:!1,text:"Categor\xEDa eliminada con \xE9xito",type:A.Success}),this._alertService.addAlert(t)})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-category-edit"]],inputs:{areaSelected:"areaSelected",categorySelected:"categorySelected"},standalone:!0,features:[y],decls:28,vars:4,consts:[["id","modalEdit","tabindex","-1","aria-labelledby","modalEditLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalEditLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"mb-3"],["for","title"],["formControlName","title","type","text","id","title","placeholder","Nombre del \xC1rea",1,"form-control",3,"value"],["for","information",1,"form-label"],["formControlName","information","id","information","placeholder","\xC1rea encargada de...","rows","5",1,"form-control",3,"value"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","editIcon",1,"form-check-input",3,"click"],["for","editIcon",1,"form-check-label"],["class","mb-3",4,"ngIf"],[1,"modal-footer","justify-content-between"],["data-bs-dismiss","modal","type","button","title","Eliminar",1,"btn","danger",3,"click"],["src","assets/icons/danger.svg","alt","Eliminar",1,"icon"],["data-bs-dismiss","modal","type","submit","title","Editar",1,"btn"],["src","assets/icons/ok.svg","alt","Aceptar",1,"icon"],["for","profileImage",1,"form-label"],[1,"d-flex","flex-wrap","justify-content-around"],["class","img img-thumbnail p-2 m-2","alt","",3,"src","ngClass","click",4,"ngFor","ngForOf"],["alt","",1,"img","img-thumbnail","p-2","m-2",3,"click","src","ngClass"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),s(5,"Editar Categor\xEDa"),n(),m(6,"button",5),n(),o(7,"form",6),g("ngSubmit",function(){return e.categoryEdit()}),o(8,"div",7)(9,"div",8)(10,"label",9),s(11,"Nombre del \xC1rea"),n(),m(12,"input",10),n(),o(13,"div",8)(14,"label",11),s(15,"Informaci\xF3n sobre la Categor\xEDa"),n(),m(16,"textarea",12),n(),o(17,"div",8)(18,"div",13)(19,"input",14),g("click",function(){return e.changeEditIcon()}),n(),o(20,"label",15),s(21,"\xBFCambiar imagen de perfil de la categor\xEDa?"),n()()(),v(22,ze,5,1,"div",16),n(),o(23,"div",17)(24,"button",18),g("click",function(){return e.deleteCategory()}),m(25,"img",19),n(),o(26,"button",20),m(27,"img",21),n()()()()()()),i&2&&(l(7),d("formGroup",e.formCategoryEdit),l(5),d("value",e.categorySelected==null?null:e.categorySelected.title),l(4),d("value",e.categorySelected==null?null:e.categorySelected.information),l(6),d("ngIf",e.editIcon))},dependencies:[z,j,L,q,U,G,B,Q,P,I],styles:[".img[_ngcontent-%COMP%]:hover, .selected[_ngcontent-%COMP%]{background-color:var(--background-color-3)}.img[_ngcontent-%COMP%]{width:4rem;cursor:pointer;border:none}.icon[_ngcontent-%COMP%]{width:2.5rem}.danger[_ngcontent-%COMP%]:hover{background-color:var(--background-color-4)!important}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]});let a=r;return a})();function Re(a,r){if(a&1&&m(0,"app-category-add",10),a&2){let u=h();d("areaSelected",u.areaSelected)}}function $e(a,r){if(a&1&&m(0,"app-category-edit",11),a&2){let u=h();d("areaSelected",u.areaSelected)("categorySelected",u.categorySelected)}}var Ce=(()=>{let r=class r{constructor(){this._sessionService=f(F),this._activatedRoute=f(ne),this._areasService=f(W),this._waitingModalService=f(Y)}isAdmin(){return this._sessionService.isAdmin()}ngOnInit(){this._activatedRoute.paramMap.subscribe(t=>S(this,null,function*(){this._waitingModalService.setIsWaiting(!0);let i=""+t.get("area_id");this.areaSelected=yield this._areasService.getArea(i),this.categories=this.areaSelected?.categories,this._waitingModalService.setIsWaiting(!1)}))}setCategorySelected(t){this.categorySelected=t}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-categories"]],standalone:!0,features:[y],decls:13,vars:6,consts:[[1,"container"],[1,"col-12"],[1,"custom-header","p-5","rounded","text-center","mt-3"],[1,"h4","fw-bold"],[1,"title","fw-bold"],[1,"row"],[3,"categorySelectedEvent","areaSelected","categories"],[3,"areaSelected",4,"ngIf"],[3,"areaSelected","categorySelected",4,"ngIf"],[3,"categorySelected"],[3,"areaSelected"],[3,"areaSelected","categorySelected"]],template:function(i,e){i&1&&(o(0,"main",0)(1,"div",1)(2,"div",2)(3,"p",3),s(4),n(),o(5,"p",4),s(6,"Categor\xEDas"),n()()(),o(7,"div",1)(8,"div",5)(9,"app-category-cards",6),g("categorySelectedEvent",function(C){return e.setCategorySelected(C)}),n()()()(),v(10,Re,1,1,"app-category-add",7)(11,$e,1,2,"app-category-edit",8),m(12,"app-category-information",9)),i&2&&(l(4),$(e.areaSelected==null?null:e.areaSelected.title),l(5),d("areaSelected",e.areaSelected)("categories",e.categories),l(),d("ngIf",e.isAdmin()),l(),d("ngIf",e.isAdmin()),l(),d("categorySelected",e.categorySelected))},dependencies:[Se,be,ye,_e,I],styles:[".title[_ngcontent-%COMP%]{font-size:2rem}.custom-header[_ngcontent-%COMP%]{background-color:#fff6}.img[_ngcontent-%COMP%]:hover{background:#00000080}.img[_ngcontent-%COMP%]{cursor:pointer}"]});let a=r;return a})();function We(a,r){a&1&&(o(0,"button",14),m(1,"img",15),n())}var Ie=(()=>{let r=class r{constructor(){this.itemSelectedEvent=new R,this._sessionService=f(F)}isAdmin(){return this._sessionService.isAdmin()}setItemSelected(t){t&&this.itemSelectedEvent.emit(t)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-item-card"]],inputs:{areaSelected:"areaSelected",categorySelected:"categorySelected",item:"item"},outputs:{itemSelectedEvent:"itemSelectedEvent"},standalone:!0,features:[y],decls:16,vars:4,consts:[[1,"card","border-dark","mt-3"],[1,"card-header","h6","text-center"],[1,"card-body"],[1,"row"],["alt","",1,"img-fluid",3,"src"],[1,"row","justify-content-center"],["type","button",1,"col-10","col-md-6","col-lg-4","btn","btn-dark","fw-bold"],[1,"card-footer"],[1,"d-flex","justify-content-between",3,"click"],["data-bs-toggle","modal","data-bs-target","#modalInformation","type","button","title","Informaci\xF3n",1,"btn"],["src","assets/icons/information.svg","alt","Informaci\xF3n",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalEdit","type","button","class","btn","title","Modificar",4,"ngIf"],["data-bs-toggle","modal","data-bs-target","#modalPurchase","type","button","title","Solicitar",1,"btn"],["src","assets/icons/show.svg","alt","Solicitar",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalEdit","type","button","title","Modificar",1,"btn"],["src","assets/icons/edit.svg","alt","Editar",1,"icon"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"p",1),s(2),n(),o(3,"div",2)(4,"div",3),m(5,"img",4),n(),o(6,"div",5)(7,"button",6),s(8),n()()(),o(9,"div",7)(10,"div",8),g("click",function(){return e.setItemSelected(e.item)}),o(11,"button",9),m(12,"img",10),n(),v(13,We,2,0,"button",11),o(14,"button",12),m(15,"img",13),n()()()()),i&2&&(l(2),$(e.item==null?null:e.item.title),l(3),d("src",e.item==null?null:e.item.src,D),l(3),$(e.item==null?null:e.item.stock),l(5),d("ngIf",e.isAdmin()))},dependencies:[I],styles:[".icon[_ngcontent-%COMP%]{width:1.25rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]});let a=r;return a})();function He(a,r){a&1&&(o(0,"button",3),m(1,"img",4),n())}function Qe(a,r){if(a&1){let u=w();o(0,"div",5)(1,"app-item-card",6),g("itemSelectedEvent",function(i){k(u);let e=h();return x(e.setItemSelected(i))}),n()()}if(a&2){let u=r.$implicit,t=h();l(),d("areaSelected",t.areaSelected)("categorySelected",t.categorySelected)("item",u)}}var Ee=(()=>{let r=class r{constructor(){this.itemSelectedEvent=new R,this._sessionService=f(F)}isAdmin(){return this._sessionService.isAdmin()}setItemSelected(t){this.itemSelectedEvent.emit(t)}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-item-cards"]],inputs:{areaSelected:"areaSelected",categorySelected:"categorySelected",items:"items"},outputs:{itemSelectedEvent:"itemSelectedEvent"},standalone:!0,features:[y],decls:3,vars:2,consts:[["data-bs-toggle","modal","data-bs-target","#modalAdd","class","btn mt-4 mb-2",4,"ngIf"],[1,"row"],["class","col-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],["data-bs-toggle","modal","data-bs-target","#modalAdd",1,"btn","mt-4","mb-2"],["src","assets/icons/add.svg","alt","Agregar Item","title","Agregar Item",1,"icon"],[1,"col-6","col-md-4","col-lg-3"],[3,"itemSelectedEvent","areaSelected","categorySelected","item"]],template:function(i,e){i&1&&(v(0,He,2,0,"button",0),o(1,"div",1),v(2,Qe,2,3,"div",2),n()),i&2&&(d("ngIf",e.isAdmin()),l(2),d("ngForOf",e.items))},dependencies:[Ie,P,I],styles:[".icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]});let a=r;return a})();var ie=(()=>{let r=class r{constructor(){this.apiUrl=`${X.url}/api/itemRoutes`,this.http=f(K)}addItem(t,i){return S(this,null,function*(){try{let e=yield this.http.post(this.apiUrl,{category_id:t._id,item:i}).toPromise();if(e){let{item:p}=e;if(p)return t.items.push(p),p._id;console.log("Error al crear item:",e.message)}}catch(e){console.log("Error al realizar la solicitud:",e)}})}getIconsItems(){return[{src:"assets/categories/acid.svg"},{src:"assets/categories/base.svg"},{src:"assets/categories/gold.svg"},{src:"assets/categories/ingot.svg"},{src:"assets/categories/radioactive.svg"}]}editItem(t){return S(this,null,function*(){try{let i=yield this.http.put(this.apiUrl+"/"+t._id,{item:t}).toPromise();if(i){let{message:e,item:p}=i;if(p)return!0;console.log("Error al editar item:",e)}}catch(i){console.log("Error al realizar la solicitud:",i)}return!1})}deleteItem(t,i){return S(this,null,function*(){try{let e=yield this.http.delete(this.apiUrl+"/"+i).toPromise();if(e){let{message:p,ok:C}=e;if(C){let E=t.items.findIndex(T=>T._id===i);return E!==-1&&t.items.splice(E,1),!0}console.log("Error al eliminar el item:",p)}}catch(e){console.log("Error al realizar la solicitud:",e)}return!1})}addStockToItem(t,i){return S(this,null,function*(){if(t._id&&t.stock!=null){let e=yield this.http.put(this.apiUrl+"/"+t._id+"/addStock",{quantity:i}).toPromise();if(e){let{ok:p}=e;return t.stock+=i,p}}return!1})}requestItem(t,i,e,p,C){return S(this,null,function*(){if(t.stock){let E={date:new Date(Date.now()),item:t,status:!1,description:e,quantity:i};return p&&C&&(E.datetimeStart=p,E.datetimeEnd=C),E}})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275prov=J({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();function Je(a,r){if(a&1){let u=w();o(0,"div",16)(1,"input",28),g("click",function(){k(u);let i=h();return x(i.changeAddDate())}),n(),o(2,"label",29),s(3,"\xBFAgregar fecha de caducidad?"),n()()}}function Ke(a,r){a&1&&(o(0,"div",8)(1,"label",30),s(2,"Fecha de caducidad del Item"),n(),m(3,"input",31),n())}function Xe(a,r){if(a&1){let u=w();o(0,"div",16)(1,"input",32),g("click",function(){k(u);let i=h();return x(i.changeAddBatch())}),n(),o(2,"label",33),s(3,"\xBFAgregar lote ?"),n()()}}function Ye(a,r){a&1&&(o(0,"div",8)(1,"label",34),s(2,"Lote del Item"),n(),m(3,"input",35),n())}function Ze(a,r){a&1&&(o(0,"div",8)(1,"label",36),s(2,"# Inventario del Item"),n(),m(3,"input",37),n())}function et(a,r){if(a&1){let u=w();o(0,"div",8)(1,"div",16)(2,"input",38),g("click",function(){k(u);let i=h();return x(i.changeAddNIU())}),n(),o(3,"label",39),s(4,"\xBFAgregar NIU de item?"),n()()()}}function tt(a,r){a&1&&(o(0,"div",8)(1,"label",40),s(2,"# NIU del Item"),n(),m(3,"input",41),n())}function it(a,r){if(a&1){let u=w();o(0,"div",8)(1,"div",16)(2,"input",42),g("click",function(){k(u);let i=h();return x(i.changeAddSerial())}),n(),o(3,"label",43),s(4,"\xBFAgregar n\xFAmero de serie?"),n()()()}}function nt(a,r){a&1&&(o(0,"div",8)(1,"label",44),s(2,"# Serie del Item"),n(),m(3,"input",45),n())}function rt(a,r){a&1&&(o(0,"div",8)(1,"label",46),s(2,"Encargado(a) del Item"),n(),m(3,"input",47),n())}var Ae=(()=>{let r=class r{constructor(){this.formItemAdd=new M({}),this.isLoan=!1,this.addDate=!1,this.addBatch=!1,this.addInventory=!1,this.addNIU=!1,this.addSerial=!1,this.addManager=!1,this._itemService=f(ie),this._alertService=f(O)}changeIsLoan(){this.isLoan=!this.isLoan}changeAddDate(){this.addDate=!this.addDate;let{date:t}=this.formItemAdd.controls;this.addDate?t.enable():t.disable(),t.updateValueAndValidity()}changeAddBatch(){this.addBatch=!this.addBatch;let{batch:t}=this.formItemAdd.controls;this.addBatch?t.enable():t.disable(),t.updateValueAndValidity()}changeAddInventory(){this.addInventory=!this.addInventory;let{inventory:t}=this.formItemAdd.controls;this.addInventory?t.enable():t.disable(),t.updateValueAndValidity()}changeAddNIU(){this.addNIU=!this.addNIU;let{niu:t}=this.formItemAdd.controls;this.addNIU?t.enable():t.disable(),t.updateValueAndValidity()}changeAddSerial(){this.addSerial=!this.addSerial;let{serial:t}=this.formItemAdd.controls;this.addSerial?t.enable():t.disable(),t.updateValueAndValidity()}changeAddManager(){this.addManager=!this.addManager;let{manager:t}=this.formItemAdd.controls;this.addManager?t.enable():t.disable(),t.updateValueAndValidity()}ngOnInit(){this.formItemAdd=new M({title:new b("",[c.required,c.minLength(1),c.maxLength(50)]),information:new b("",[c.required,c.minLength(5),c.maxLength(500)]),stock:new b(0,[c.required,c.min(0),c.max(100),c.pattern("^[0-9]*$")]),date:new b({value:"",disabled:!0},[c.required,c.pattern(/^\d{4}-\d{2}-\d{2}$/)]),batch:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)]),inventory:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)]),niu:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)]),serial:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)]),manager:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)])}),this.iconsItems=this._itemService.getIconsItems()}selectIcon(t){this.iconSelected=t}itemAdd(){return S(this,null,function*(){let t={keep:!1,text:"Error al agregar Item, favor de revisar",type:A.Danger};if(this.formItemAdd.valid&&this.areaSelected&&this.categorySelected){let i="";this.iconSelected&&(i=this.iconSelected.src);let{title:e,information:p,stock:C}=this.formItemAdd.value,E={title:e,information:p,stock:C,src:i};if(this.isLoan&&(E.loan=this.isLoan),this.addDate){let{date:V}=this.formItemAdd.value;E.date=V}if(this.addBatch){let{batch:V}=this.formItemAdd.value;E.batch=V}if(this.addInventory){let{inventory:V}=this.formItemAdd.value;E.inventory=V}if(this.addSerial){let{serial:V}=this.formItemAdd.value;E.serial=V}if(this.addNIU){let{niu:V}=this.formItemAdd.value;E.niu=V}if(this.addManager){let{manager:V}=this.formItemAdd.value;E.manager=V}let T=yield this._itemService.addItem(this.categorySelected,E);E._id=T,T&&(this.formItemAdd.reset(),t={keep:!1,text:"Item agregado con \xE9xito",type:A.Success},this.addBatch=!1,this.addDate=!1,this.addInventory=!1,this.addManager=!1,this.addNIU=!1,this.addSerial=!1)}this._alertService.addAlert(t)})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-item-add"]],inputs:{areaSelected:"areaSelected",categorySelected:"categorySelected"},standalone:!0,features:[y],decls:51,vars:11,consts:[["id","modalAdd","tabindex","-1","aria-labelledby","modalAddLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalAddLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"mb-3"],["for","title"],["formControlName","title","type","text","id","title","placeholder","Nombre del Item",1,"form-control"],["for","information",1,"form-label"],["formControlName","information","id","information","placeholder","Su proposito principal es ...","rows","5",1,"form-control"],[1,"mb-3","col-12","col-md-6","col-lg-3"],["for","stock",1,"form-label"],["formControlName","stock","id","stock","type","number",1,"form-control"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","isLoan",1,"form-check-input",3,"click"],["for","isLoan",1,"form-check-label"],["class","form-check form-switch",4,"ngIf"],["class","mb-3",4,"ngIf"],["type","checkbox","role","switch","id","addInventory",1,"form-check-input",3,"click"],["for","addInventory",1,"form-check-label"],["type","checkbox","role","switch","id","addManager",1,"form-check-input",3,"click"],["for","addManager",1,"form-check-label"],[1,"modal-footer"],["data-bs-dismiss","modal","type","submit","title","Agregar",1,"btn"],["src","assets/icons/ok.svg","alt","",1,"icon"],["type","checkbox","role","switch","id","addDate",1,"form-check-input",3,"click"],["for","addDate",1,"form-check-label"],["for","date",1,"form-label"],["formControlName","date","id","date","type","date",1,"form-control"],["type","checkbox","role","switch","id","addBatch",1,"form-check-input",3,"click"],["for","addBatch",1,"form-check-label"],["for","batch",1,"form-label"],["formControlName","batch","id","batch","type","text",1,"form-control"],["for","inventory",1,"form-label"],["formControlName","inventory","id","inventory","type","text",1,"form-control"],["type","checkbox","role","switch","id","addNIU",1,"form-check-input",3,"click"],["for","addNIU",1,"form-check-label"],["for","niu",1,"form-label"],["formControlName","niu","id","niu","type","text",1,"form-control"],["type","checkbox","role","switch","id","addSerial",1,"form-check-input",3,"click"],["for","addSerial",1,"form-check-label"],["for","serial",1,"form-label"],["formControlName","serial","id","serial","type","text",1,"form-control"],["for","manager",1,"form-label"],["formControlName","manager","id","manager","type","text",1,"form-control"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),s(5,"Agregar Item"),n(),m(6,"button",5),n(),o(7,"form",6),g("ngSubmit",function(){return e.itemAdd()}),o(8,"div",7)(9,"div",8)(10,"label",9),s(11,"Nombre del Item"),n(),m(12,"input",10),n(),o(13,"div",8)(14,"label",11),s(15,"Informaci\xF3n sobre el Item"),n(),m(16,"textarea",12),n(),o(17,"div",13)(18,"label",14),s(19,"Stock del Item"),n(),m(20,"input",15),n(),o(21,"div",8)(22,"div",16)(23,"input",17),g("click",function(){return e.changeIsLoan()}),n(),o(24,"label",18),s(25,"\xBFEs un Equipo / Maquinar\xEDa?"),n()()(),o(26,"div",8),v(27,Je,4,0,"div",19),n(),v(28,Ke,4,0,"div",20),o(29,"div",8),v(30,Xe,4,0,"div",19),n(),v(31,Ye,4,0,"div",20),o(32,"div",8)(33,"div",16)(34,"input",21),g("click",function(){return e.changeAddInventory()}),n(),o(35,"label",22),s(36,"\xBFAgregar n\xFAmero de inventario?"),n()()(),v(37,Ze,4,0,"div",20)(38,et,5,0,"div",20)(39,tt,4,0,"div",20)(40,it,5,0,"div",20)(41,nt,4,0,"div",20),o(42,"div",8)(43,"div",16)(44,"input",23),g("click",function(){return e.changeAddManager()}),n(),o(45,"label",24),s(46,"\xBFAgregar encargado(a) del item?"),n()()(),v(47,rt,4,0,"div",20),n(),o(48,"div",25)(49,"button",26),m(50,"img",27),n()()()()()()),i&2&&(l(7),d("formGroup",e.formItemAdd),l(20),d("ngIf",!e.isLoan),l(),d("ngIf",e.addDate),l(2),d("ngIf",!e.isLoan),l(),d("ngIf",e.addBatch),l(6),d("ngIf",e.addInventory),l(),d("ngIf",e.isLoan),l(),d("ngIf",e.addNIU),l(),d("ngIf",e.isLoan),l(),d("ngIf",e.addSerial),l(6),d("ngIf",e.addManager))},dependencies:[z,j,L,Z,q,U,G,B,I],styles:[".img[_ngcontent-%COMP%]:hover, .selected[_ngcontent-%COMP%]{background-color:var(--background-color-3)}.img[_ngcontent-%COMP%]{width:4rem;cursor:pointer;border:none}.icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]});let a=r;return a})();function at(a,r){if(a&1){let u=w();o(0,"div",8)(1,"div",17)(2,"input",27),g("click",function(){k(u);let i=h();return x(i.changeEditDate())}),n(),o(3,"label",28),s(4,"\xBFModificar fecha de caducidad?"),n()()()}if(a&2){let u=h();l(2),d("value",u.itemSelected==null?null:u.itemSelected.batch)}}function ot(a,r){a&1&&(o(0,"div",8)(1,"label",29),s(2,"Fecha de caducidad del Item"),n(),m(3,"input",30),n())}function lt(a,r){if(a&1){let u=w();o(0,"div",8)(1,"div",17)(2,"input",31),g("click",function(){k(u);let i=h();return x(i.changeEditBatch())}),n(),o(3,"label",32),s(4,"\xBFModificar lote?"),n()()()}}function dt(a,r){a&1&&(o(0,"div",8)(1,"label",33),s(2,"Lote del Item"),n(),m(3,"input",34),n())}function ct(a,r){a&1&&(o(0,"div",8)(1,"label",35),s(2,"# Inventario del Item"),n(),m(3,"input",36),n())}function st(a,r){if(a&1){let u=w();o(0,"div",8)(1,"div",17)(2,"input",37),g("click",function(){k(u);let i=h();return x(i.changeEditNIU())}),n(),o(3,"label",38),s(4,"\xBFModificar NIU de item?"),n()()()}}function mt(a,r){a&1&&(o(0,"div",8)(1,"label",39),s(2,"# NIU del Item"),n(),m(3,"input",40),n())}function pt(a,r){if(a&1){let u=w();o(0,"div",8)(1,"div",17)(2,"input",41),g("click",function(){k(u);let i=h();return x(i.changeEditSerial())}),n(),o(3,"label",42),s(4,"\xBFModificar n\xFAmero de serie?"),n()()()}}function ut(a,r){a&1&&(o(0,"div",8)(1,"label",43),s(2,"# Serie del Item"),n(),m(3,"input",44),n())}function ft(a,r){a&1&&(o(0,"div",8)(1,"label",45),s(2,"Encargado(a) del Item"),n(),m(3,"input",46),n())}var ke=(()=>{let r=class r{constructor(){this.formItemEdit=new M({}),this.editIcon=!1,this.editDate=!1,this.editBatch=!1,this.editInventory=!1,this.editNIU=!1,this.editSerial=!1,this.editManager=!1,this._itemService=f(ie),this._alertService=f(O)}changeEditDate(){this.editDate=!this.editDate;let{date:t}=this.formItemEdit.controls;this.editDate?t.enable():t.disable(),t.updateValueAndValidity()}changeEditBatch(){this.editBatch=!this.editBatch;let{batch:t}=this.formItemEdit.controls;this.editBatch?t.enable():t.disable(),t.updateValueAndValidity()}changeEditInventory(){this.editInventory=!this.editInventory;let{inventory:t}=this.formItemEdit.controls;this.editInventory?t.enable():t.disable(),t.updateValueAndValidity()}changeEditNIU(){this.editNIU=!this.editNIU;let{niu:t}=this.formItemEdit.controls;this.editNIU?t.enable():t.disable(),t.updateValueAndValidity()}changeEditSerial(){this.editSerial=!this.editSerial;let{serial:t}=this.formItemEdit.controls;this.editSerial?t.enable():t.disable(),t.updateValueAndValidity()}changeEditManager(){this.editManager=!this.editManager;let{manager:t}=this.formItemEdit.controls;this.editManager?t.enable():t.disable(),t.updateValueAndValidity()}ngOnInit(){this.formItemEdit=new M({title:new b("",[c.required,c.minLength(1),c.maxLength(20)]),information:new b("",[c.required,c.minLength(5),c.maxLength(255)]),stock:new b(0,[c.required,c.min(0),c.max(100),c.pattern("^[0-9]*$")]),date:new b({value:"",disabled:!0},[c.required,c.pattern(/^\d{4}-\d{2}-\d{2}$/)]),batch:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)]),inventory:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)]),niu:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)]),serial:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)]),manager:new b({value:"",disabled:!0},[c.required,c.minLength(1),c.maxLength(50)])}),this.iconsItems=this._itemService.getIconsItems()}changeEditIcon(){this.editIcon=!this.editIcon}selectIcon(t){this.iconSelected=t}itemEdit(){return S(this,null,function*(){let t={keep:!1,text:"Error al modificar el Item, favor de revisar",type:A.Danger};if(this.itemSelected){let{title:i,information:e,stock:p,date:C,batch:E,inventory:T,niu:V,serial:ae,manager:oe}=this.formItemEdit.value;i&&(this.itemSelected.title=i),e&&(this.itemSelected.information=e),p&&(this.itemSelected.stock=p),C&&(this.itemSelected.date=C),E&&(this.itemSelected.batch=E),T&&(this.itemSelected.inventory=T),V&&(this.itemSelected.niu=V),ae&&(this.itemSelected.serial=ae),oe&&(this.itemSelected.manager=oe),this.editIcon&&this.iconSelected&&(this.itemSelected.src=this.iconSelected.src),(yield this._itemService.editItem(this.itemSelected))&&(t={keep:!1,text:"Item modificado con \xE9xito",type:A.Success})}this._alertService.addAlert(t)})}deleteItem(){return S(this,null,function*(){let t={keep:!1,text:"Error al eliminar Item, favor de revisar",type:A.Danger};this.areaSelected&&this.categorySelected&&this.itemSelected?._id&&(yield this._itemService.deleteItem(this.categorySelected,this.itemSelected._id))&&(t={keep:!1,text:"Item eliminado con \xE9xito",type:A.Success}),this._alertService.addAlert(t)})}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-item-edit"]],inputs:{areaSelected:"areaSelected",categorySelected:"categorySelected",itemSelected:"itemSelected"},standalone:!0,features:[y],decls:46,vars:14,consts:[["id","modalEdit","tabindex","-1","aria-labelledby","modalEditLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalEditLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"mb-3"],["for","title"],["formControlName","title","type","text","id","title","placeholder","Nombre del Item",1,"form-control",3,"value"],["for","information",1,"form-label"],["formControlName","information","id","information","placeholder","Su proposito principal es ...","rows","5",1,"form-control",3,"value"],[1,"mb-3","col-12","col-md-6","col-lg-3"],["for","stock",1,"form-label"],["formControlName","stock","id","stock","type","number",1,"form-control",3,"value"],["class","mb-3",4,"ngIf"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","editInventory",1,"form-check-input",3,"click"],["for","editInventory",1,"form-check-label"],["type","checkbox","role","switch","id","editManager",1,"form-check-input",3,"click"],["for","editManager",1,"form-check-label"],[1,"modal-footer","justify-content-between"],["data-bs-dismiss","modal","type","button","title","Eliminar",1,"btn","danger",3,"click"],["src","assets/icons/danger.svg","alt","Eliminar",1,"icon"],["data-bs-dismiss","modal","type","submit","title","Editar",1,"btn"],["src","assets/icons/ok.svg","alt","Aceptar",1,"icon"],["type","checkbox","role","switch","id","editDate",1,"form-check-input",3,"click","value"],["for","editDate",1,"form-check-label"],["for","date",1,"form-label"],["formControlName","date","id","date","type","date",1,"form-control"],["type","checkbox","role","switch","id","editBatch",1,"form-check-input",3,"click"],["for","editBatch",1,"form-check-label"],["for","batch",1,"form-label"],["formControlName","batch","id","batch","type","text",1,"form-control"],["for","inventory",1,"form-label"],["formControlName","inventory","id","inventory","type","text",1,"form-control"],["type","checkbox","role","switch","id","editNIU",1,"form-check-input",3,"click"],["for","editNIU",1,"form-check-label"],["for","niu",1,"form-label"],["formControlName","niu","id","niu","type","text",1,"form-control"],["type","checkbox","role","switch","id","editSerial",1,"form-check-input",3,"click"],["for","editSerial",1,"form-check-label"],["for","serial",1,"form-label"],["formControlName","serial","id","serial","type","text",1,"form-control"],["for","manager",1,"form-label"],["formControlName","manager","id","manager","type","text",1,"form-control"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),s(5,"Editar Item"),n(),m(6,"button",5),n(),o(7,"form",6),g("ngSubmit",function(){return e.itemEdit()}),o(8,"div",7)(9,"div",8)(10,"label",9),s(11,"Nombre del Item"),n(),m(12,"input",10),n(),o(13,"div",8)(14,"label",11),s(15,"Informaci\xF3n sobre el Item"),n(),m(16,"textarea",12),n(),o(17,"div",13)(18,"label",14),s(19,"Stock del Item"),n(),m(20,"input",15),n(),v(21,at,5,1,"div",16)(22,ot,4,0,"div",16)(23,lt,5,0,"div",16)(24,dt,4,0,"div",16),o(25,"div",8)(26,"div",17)(27,"input",18),g("click",function(){return e.changeEditInventory()}),n(),o(28,"label",19),s(29,"\xBFModificar n\xFAmero de inventario?"),n()()(),v(30,ct,4,0,"div",16)(31,st,5,0,"div",16)(32,mt,4,0,"div",16)(33,pt,5,0,"div",16)(34,ut,4,0,"div",16),o(35,"div",8)(36,"div",17)(37,"input",20),g("click",function(){return e.changeEditManager()}),n(),o(38,"label",21),s(39,"\xBFModificar encargado(a) del item?"),n()()(),v(40,ft,4,0,"div",16),n(),o(41,"div",22)(42,"button",23),g("click",function(){return e.deleteItem()}),m(43,"img",24),n(),o(44,"button",25),m(45,"img",26),n()()()()()()),i&2&&(l(7),d("formGroup",e.formItemEdit),l(5),d("value",e.itemSelected==null?null:e.itemSelected.title),l(4),d("value",e.itemSelected==null?null:e.itemSelected.information),l(4),d("value",e.itemSelected==null?null:e.itemSelected.stock),l(),d("ngIf",!(e.itemSelected!=null&&e.itemSelected.loan)),l(),d("ngIf",e.editDate),l(),d("ngIf",!(e.itemSelected!=null&&e.itemSelected.loan)),l(),d("ngIf",e.editBatch),l(6),d("ngIf",e.editInventory),l(),d("ngIf",e.itemSelected==null?null:e.itemSelected.loan),l(),d("ngIf",e.editNIU),l(),d("ngIf",e.itemSelected==null?null:e.itemSelected.loan),l(),d("ngIf",e.editSerial),l(6),d("ngIf",e.editManager))},dependencies:[z,j,L,Z,q,U,G,B,I],styles:[".img[_ngcontent-%COMP%]:hover, .selected[_ngcontent-%COMP%]{background-color:var(--background-color-3)}.img[_ngcontent-%COMP%]{width:4rem;cursor:pointer;border:none}.icon[_ngcontent-%COMP%]{width:2.5rem}.danger[_ngcontent-%COMP%]:hover{background-color:var(--background-color-4)!important}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]});let a=r;return a})();function gt(a,r){a&1&&(o(0,"div",9)(1,"label",22),s(2,"Nombre del usuario a asignar"),n(),m(3,"input",23),n())}function vt(a,r){a&1&&(o(0,"div",9)(1,"label",24),s(2,"Fecha de inicio de uso del equipo"),n(),m(3,"input",25),n())}function ht(a,r){a&1&&(o(0,"div",9)(1,"label",26),s(2,"Fecha de finalizaci\xF3n de uso del equipo"),n(),m(3,"input",27),n())}var xe=(()=>{let r=class r{constructor(){this.formItemPurchase=new M({}),this._itemService=f(ie),this._requestService=f(de),this._alertService=f(O),this._sessionService=f(F)}ngOnChanges(t){t.itemSelected&&this.itemSelected&&(this.initializeForm(),this.updateMaxQuantityValidation())}ngOnInit(){this.initializeForm()}initializeForm(){return S(this,null,function*(){let t=this.itemSelected?.stock?this.itemSelected.stock:0,i=this.itemSelected?.loan?this.itemSelected.loan:!1;this.formItemPurchase=new M({username:new b("",[c.minLength(1),c.maxLength(255)]),quantity:new b(0,[c.required,c.min(0),c.max(t),c.pattern("^[0-9]*$")]),description:new b("",[c.required,c.minLength(5),c.maxLength(100)]),datetimeStart:new b({value:null,disabled:!i},[c.required,this.dateGreaterThanTodayValidator]),datetimeEnd:new b({value:null,disabled:!i},[c.required])}),i&&this.formItemPurchase.setValidators(this.dateRangeValidator)})}dateGreaterThanTodayValidator(t){let i=new Date(t.value),e=new Date;return e.setHours(0,0,0,0),i>e?null:{dateTooEarly:!0}}dateRangeValidator(t){let i=t.get("datetimeStart")?.value,e=t.get("datetimeEnd")?.value;return!i||!e||e>i?null:{dateRangeInvalid:!0}}itemPurchase(){return S(this,null,function*(){console.log(this.formItemPurchase);let t={keep:!1,text:"Error al solicitar el Item, favor de revisar",type:A.Danger};if(this.itemSelected&&this.formItemPurchase.valid){let{quantity:i,description:e,datetimeStart:p,datetimeEnd:C,username:E}=this.formItemPurchase.value,T=yield this._itemService.requestItem(this.itemSelected,i,e,p,C);T&&(this.isAdmin()?yield this._requestService.addRequestAdmin(T,E):yield this._requestService.addRequest(T),this.itemSelected.stock&&!this.itemSelected.loan&&(this.itemSelected.stock-=i),t={keep:!1,text:"Item(s) solicitado con \xE9xito",type:A.Success},this.updateMaxQuantityValidation())}this._alertService.addAlert(t)})}updateMaxQuantityValidation(){let t=this.itemSelected?.stock||0;this.formItemPurchase.get("quantity")?.setValidators([c.required,c.min(0),c.max(t),c.pattern("^[0-9]*$")]),this.formItemPurchase.get("quantity")?.updateValueAndValidity()}isAdmin(){return this._sessionService.isAdmin()}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-item-purchase"]],inputs:{areaSelected:"areaSelected",categorySelected:"categorySelected",itemSelected:"itemSelected"},standalone:!0,features:[le,y],decls:34,vars:7,consts:[["id","modalPurchase","tabindex","-1","aria-labelledby","modalPurchaseLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalPurchaseLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit","formGroup"],[1,"modal-body"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["for","title",1,"fw-bold"],["id","title"],["for","stock",1,"form-label","fw-bold"],["id","stock"],["for","quantity",1,"form-label","fw-bold"],[1,"col-12","col-md-6","col-lg-3"],["formControlName","quantity","id","quantity","type","number",1,"form-control",3,"min"],["for","description",1,"form-label","fw-bold"],["placeholder","La solicitud es para...","formControlName","description","id","description","type","text",1,"form-control"],[1,"modal-footer","justify-content-end"],["data-bs-dismiss","modal","type","submit","title","Editar",1,"btn"],["src","assets/icons/ok.svg","alt","",1,"icon"],["for","username"],["formControlName","username","type","text","id","username","placeholder","Nombre del Usuario",1,"form-control"],["for","datetimeStart",1,"form-label","fw-bold"],["formControlName","datetimeStart","id","datetimeStart","type","datetime-local",1,"form-control"],["for","datetimeEnd",1,"form-label","fw-bold"],["formControlName","datetimeEnd","id","datetimeEnd","type","datetime-local",1,"form-control"]],template:function(i,e){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),s(5,"Solicitar Item al/los Administrador(es)"),n(),m(6,"button",5),n(),o(7,"form",6),g("ngSubmit",function(){return e.itemPurchase()}),o(8,"div",7),v(9,gt,4,0,"div",8),o(10,"div",9)(11,"label",10),s(12,"Nombre del Item:"),n(),o(13,"p",11),s(14),n()(),o(15,"div",9)(16,"label",12),s(17,"Stock disponible del Item:"),n(),o(18,"p",13),s(19),n()(),o(20,"div",9)(21,"label",14),s(22,"Cantidad a solicitar del Item"),n(),o(23,"div",15),m(24,"input",16),n()(),o(25,"div",9)(26,"label",17),s(27,"Descripci\xF3n de la solicitud"),n(),m(28,"input",18),n(),v(29,vt,4,0,"div",8)(30,ht,4,0,"div",8),n(),o(31,"div",19)(32,"button",20),m(33,"img",21),n()()()()()()),i&2&&(l(7),d("formGroup",e.formItemPurchase),l(2),d("ngIf",e.isAdmin()),l(5),H(" ",e.itemSelected==null?null:e.itemSelected.title," "),l(5),H(" ",e.itemSelected==null?null:e.itemSelected.stock," "),l(5),d("min",0),l(5),d("ngIf",e.itemSelected==null?null:e.itemSelected.loan),l(),d("ngIf",e.itemSelected==null?null:e.itemSelected.loan))},dependencies:[z,j,L,Z,q,U,se,G,B,I],styles:[".icon[_ngcontent-%COMP%]{width:2.5rem}.danger[_ngcontent-%COMP%]:hover{background-color:var(--background-color-4)!important}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:solid 2px rgb(163,43,43)!important}.ng-valid.ng-touched[_ngcontent-%COMP%]{border:solid 2px rgb(43,163,79)!important}"]});let a=r;return a})();function St(a,r){if(a&1&&m(0,"app-item-add",11),a&2){let u=h();d("areaSelected",u.areaSelected)("categorySelected",u.categorySelected)}}function bt(a,r){if(a&1&&m(0,"app-item-edit",10),a&2){let u=h();d("areaSelected",u.areaSelected)("categorySelected",u.categorySelected)("itemSelected",u.itemSelected)}}var we=(()=>{let r=class r{constructor(){this._sessionService=f(F),this._activatedRoute=f(ne),this._areasService=f(W),this._categoriesService=f(te),this._waitingModalService=f(Y)}isAdmin(){return this._sessionService.isAdmin()}ngOnInit(){return S(this,null,function*(){this._activatedRoute.paramMap.subscribe(t=>S(this,null,function*(){this._waitingModalService.setIsWaiting(!0);let i=""+t.get("area_id"),e=""+t.get("category_id");this.areaSelected=yield this._areasService.getArea(i),this.areaSelected&&(this.categorySelected=yield this._categoriesService.getCategory(e),this.categorySelected&&(this.items=this.categorySelected.items)),this._waitingModalService.setIsWaiting(!1)}))})}setItemSelected(t){this.itemSelected=t}};r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=_({type:r,selectors:[["app-items"]],standalone:!0,features:[y],decls:16,vars:11,consts:[[1,"container"],[1,"col-12"],[1,"custom-header","p-5","rounded","text-center","mt-3"],[1,"h4","fw-bold"],[1,"title","fw-bold"],[1,"row"],[3,"itemSelectedEvent","areaSelected","categorySelected","items"],[3,"areaSelected","categorySelected",4,"ngIf"],[3,"areaSelected","categorySelected","itemSelected",4,"ngIf"],[3,"itemSelected"],[3,"areaSelected","categorySelected","itemSelected"],[3,"areaSelected","categorySelected"]],template:function(i,e){i&1&&(o(0,"main",0)(1,"div",1)(2,"div",2)(3,"p",3),s(4),n(),o(5,"p",3),s(6),n(),o(7,"p",4),s(8,"Inventario"),n()()(),o(9,"div",1)(10,"div",5)(11,"app-item-cards",6),g("itemSelectedEvent",function(C){return e.setItemSelected(C)}),n()()()(),v(12,St,1,2,"app-item-add",7)(13,bt,1,3,"app-item-edit",8),m(14,"app-item-information",9)(15,"app-item-purchase",10)),i&2&&(l(4),$(e.areaSelected==null?null:e.areaSelected.title),l(2),$(e.categorySelected==null?null:e.categorySelected.title),l(5),d("areaSelected",e.areaSelected)("categorySelected",e.categorySelected)("items",e.items),l(),d("ngIf",e.isAdmin()),l(),d("ngIf",e.isAdmin()),l(),d("itemSelected",e.itemSelected),l(),d("areaSelected",e.areaSelected)("categorySelected",e.categorySelected)("itemSelected",e.itemSelected))},dependencies:[Ee,Ae,ke,ce,xe,I],styles:[".title[_ngcontent-%COMP%]{font-size:2rem}.custom-header[_ngcontent-%COMP%]{background-color:#fff6}.img[_ngcontent-%COMP%]:hover{background:#00000080}.img[_ngcontent-%COMP%]{cursor:pointer}"]});let a=r;return a})();var Wr=[{path:"areas",component:ve},{path:"categories/:area_id",component:Ce},{path:"items/:area_id/:category_id",component:we},{path:"**",redirectTo:"areas"}];export{Wr as routes};
